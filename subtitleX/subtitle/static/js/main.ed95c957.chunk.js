(this.webpackJsonpsubstitute=this.webpackJsonpsubstitute||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),o=n(27),i=(n(64),n(48));const{default:c,ThemeProvider:a,useTheme:l}=i,d={blue:"rgb(98,135,161)",black:"black",white:"white",dark:"#111111",darkBlue:"#0a6bab",lightGray:"#CCCCCC",red:"red"},h={palette:d,colors:{foreground:d.lightGray,background:d.dark},elementSizes:{icon:44,scrubbar:30,scrubCursor:2,content:800,logo:150,screenshot:500},spacings:{xxs:1,xs:2,s:5,m:10,ml:20,l:50,xl:100,xxl:250},lineHeight:1.5,fontSizes:{xxs:10,xs:12,s:14,m:16,ml:20,l:24,xl:32,xxl:48},fontWeights:{normal:"normal",bold:"bold",lighter:"lighter"},breakpoints:{mobileM:750,mobileS:350}},u=(e,t)=>t&&"".concat(e.spacings[t],"px");function b(e,t){let n=0,s=e.length;for(;n<s;){let r=Math.floor((s+n)/2);t(e[r])?s=r:n=r+1}return n}const j=e=>Math.abs(e)<10?"0".concat(e):e.toString(),g=e=>({padding:u(e.theme,e.padding),paddingTop:u(e.theme,e.verticalPadding),paddingBottom:u(e.theme,e.verticalPadding),paddingLeft:u(e.theme,e.horizontalPadding),paddingRight:u(e.theme,e.horizontalPadding),margin:u(e.theme,e.margin),marginLeft:u(e.theme,e.horizontalMargin),marginRight:u(e.theme,e.horizontalMargin),marginTop:u(e.theme,e.verticalMargin),marginBottom:u(e.theme,e.verticalMargin)}),f=(e,t,n,s)=>"rgba(0,0,0,".concat(n,") 0px ").concat(u(s,e)," ").concat(u(s,t)),m=c("span")((e=>{var t,n;return[g(e),{fontWeight:e.theme.fontWeights[null!==(t=e.fontWeight)&&void 0!==t?t:"normal"],color:e.theme.colors.foreground,fontSize:e.theme.fontSizes[null!==(n=e.fontSize)&&void 0!==n?n:"m"],lineHeight:e.theme.lineHeight}]})),x=c("span")((e=>({fontWeight:e.theme.fontWeights.bold}))),v=c("span")((e=>({fontFamily:"monospace"}))),O=(c(m)((e=>{var t,n,s;return{textShadow:f(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(s=e.shadowOpacity)&&void 0!==s?s:.5,e.theme)}})),e=>{let t,n=!0;const s=()=>{n&&(e(),t=requestAnimationFrame(s))};return t=requestAnimationFrame(s),()=>{n=!1,cancelAnimationFrame(t)}});class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.t0=e,this.v=t,this.t=void 0,this.running=!1,this.stopCallback=void 0,this.observers=new Set,this.t=e}broadcast(){const e=this.t;this.observers.forEach((t=>t(e)))}start(){if(!this.running){this.running=!0;const e=Date.now();this.stopCallback=O((()=>{this.t=(Date.now()-e)*this.v+this.t0,this.broadcast()}))}}pause(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this.stopCallback)||void 0===e||e.call(this),this.stopCallback=void 0,this.running=!1,this.t0=this.t,t&&this.broadcast()}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.v;this.t=e,this.v=t,this.running?(this.pause(!1),this.start()):(this.t0=e,this.broadcast())}observe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}}const k=Object(s.createContext)(new p),w=k.Provider,S=()=>Object(s.useContext)(k);var y=n(2);const C=Object(s.memo)((()=>{const e=S(),[t,n]=Object(s.useState)(e.t);return Object(s.useEffect)((()=>e.observe((e=>n(Math.floor(e/1e3))))),[e]),Object(y.jsx)(m,{fontSize:"m",children:Object(y.jsxs)(v,{children:[j(Math.floor(t/3600)),":",j(Math.floor(t/60%60)),":",j(Math.floor(t%60))]})})})),E=c("div")((e=>({...g(e),display:"flex",flexDirection:"column"}))),z=c(E)((e=>({backgroundColor:e.theme.colors.background,borderRadius:u(e.theme,e.borderRadius),overflow:"hidden"}))),R=(c(z)((e=>{var t,n,s;return{boxShadow:f(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(s=e.shadowOpacity)&&void 0!==s?s:.5,e.theme)}})),e=>{let{max:t}=e;const{palette:n,elementSizes:r}=l(),o=S(),[i,c]=Object(s.useState)(0);return Object(s.useEffect)((()=>o.observe((e=>c(e/t)))),[o,t]),Object(y.jsx)("div",{style:{position:"absolute",left:"".concat(100*i,"%"),top:0,height:"100%",width:r.scrubCursor,backgroundColor:n.red}})}),M=Object(s.memo)((e=>{var t,n;let{cues:r}=e;const{colors:o,elementSizes:i}=l(),c=null!==(t=null===(n=r[r.length-1])||void 0===n?void 0:n.end)&&void 0!==t?t:0,a=Object(s.useRef)(null),d=S(),h=Object(s.useCallback)((e=>{e.width=e.offsetWidth,e.height=e.offsetHeight;const t=e.getContext("2d");if(t){t.clearRect(0,0,e.width,e.height);const n=e.width/c;t.fillStyle=o.foreground;for(const s of r)t.fillRect(s.start*n,0,(s.end-s.start)*n,e.height)}}),[r,o,c]);return Object(s.useEffect)((()=>{const e=a.current;if(e){h(e);const t=t=>{if(1===t.buttons){const n=e.getBoundingClientRect(),s=(t.clientX-n.left)/e.offsetWidth;d.set(s*c)}},n=t=>{const n=e.getBoundingClientRect(),s=(t.touches[0].clientX-n.left)/e.offsetWidth;d.set(Math.min(Math.max(s,0),1)*c)},s=()=>h(e);return window.addEventListener("resize",s),e.addEventListener("mousemove",t),e.addEventListener("mousedown",t),e.addEventListener("touchmove",n),e.addEventListener("touchstart",n),()=>{window.removeEventListener("resize",s),e.removeEventListener("mousemove",t),e.removeEventListener("mousedown",t),e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",n)}}}),[h,d,c]),Object(y.jsxs)(z,{borderRadius:"m",style:{position:"relative",width:"100%",overflow:"hidden",cursor:"pointer"},children:[Object(y.jsx)("canvas",{height:i.scrubbar,style:{display:"block"},ref:a}),Object(y.jsx)(R,{max:c})]})}));var L=n(6),A=n.n(L);const D=function(e,t){let{foreground:n,background:s}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(t){case"NONE":return{background:s,foreground:n};case"INVERT":return{background:n,foreground:s};case"DARKEN_BACKGROUND":return{foreground:n,background:A()(s).darken(.25*r).desaturate(.5*r).toString()};case"LIGHTEN_BACKGROUND":return{foreground:n,background:A()(s).lighten(.4*r).saturate(.1*r).toString()};case"MAKE_TRANSPARENT":return{foreground:A()(n).alpha(.5*r).toString(),background:A()(s).alpha(.5*r).toString()}}},N=e=>{let{children:t,mode:n="INVERT",strength:r=1}=e;const o=l(),i=Object(s.useMemo)((()=>({...o,colors:D(o.colors,n,r)})),[o,n,r]);return Object(y.jsx)(a,{theme:i,children:t})};var I,T,W=n(19);const B=e=>{const t=A()(e);return t.isDark()?t.lighten(.1).string():t.darken(.1).string()},P=e=>{const t=A()(e);return t.isDark()?t.lighten(.25).string():t.darken(.25).string()},F=c(m).attrs({as:"button"})(I||(I=Object(W.a)(["\n  transition: 0.25s;\n  border: none;\n  border-radius: ",";\n  outline-width: 0;\n  background-color: ",";\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: ",";\n  :hover {\n    cursor: pointer;\n    background-color: ",";\n  }\n  :active {\n    transition: 0s;\n    background-color: ",";\n  }\n"])),(e=>u(e.theme,"m")),(e=>e.theme.colors.background),(e=>e.disabled?.5:1),(e=>e.disabled?"none":"initial"),(e=>f("xxs","xs",.5,e.theme)),(e=>B(e.theme.colors.background)),(e=>P(e.theme.colors.background))),G=c(m)(T||(T=Object(W.a)(["\n  transition: 0.25s;\n  opacity: ",";\n  pointer-events: ",";\n  :hover {\n    cursor: pointer;\n    color: ",";\n  }\n  :active {\n    transition: 0s;\n    color: ",";\n  }\n"])),(e=>e.disabled?.5:1),(e=>e.disabled?"none":"initial"),(e=>B(e.theme.colors.foreground)),(e=>P(e.theme.colors.foreground)));var H=n(17);const K=e=>{let{cues:t}=e;const[n,r]=Object(s.useState)(""),o=S();return Object(s.useEffect)((()=>o.observe((e=>{const n=t[b(t,(t=>e<t.end))];r(n&&e>=n.start?n.text:"")}))),[o,t]),Object(y.jsx)(m,{style:{textAlign:"center"},fontSize:"xxl",children:n})};var U=n(52),_=n.n(U),V=n(29);const q=e=>{let{children:t,background:n,foreground:s}=e;const r=l(),o={...r,colors:{...r.colors,background:n?r.palette[n]:r.colors.background,foreground:s?r.palette[s]:r.colors.foreground}};return Object(y.jsx)(a,{theme:o,children:t})},J=c(m).attrs((e=>{var t;return{as:null!==(t=e.as)&&void 0!==t?t:"input"}}))((e=>({background:"transparent",border:"none",outlineWidth:0,color:e.theme.colors.foreground}))),X=e=>{let{speed:t}=e;const n=S(),[r,o]=Object(s.useState)(!1),[i,c]=Object(s.useState)(""),[a,d]=Object(s.useState)(t),h=l(),u=Object(s.useRef)(null);return Object(s.useEffect)((()=>{a!==t&&(d(t),o(!1))}),[a,t]),Object(s.useEffect)((()=>{const e=u.current;if(e){e.style.width="".concat(e.scrollWidth,"px");const t=e=>{if("Enter"===e.key){const e=Number.parseFloat(i);isFinite(e)&&n.set(n.t,e),o(!1)}};return e.addEventListener("keyup",t),()=>e.removeEventListener("keyup",t)}}),[i,n]),r?Object(y.jsx)(J,{ref:u,style:{fontFamily:"monospace",width:3*h.fontSizes.m},onChange:e=>{c(e.currentTarget.value)},value:i}):Object(y.jsx)(v,{onClick:()=>{o(!0),c(t.toPrecision(4))},children:t.toPrecision(4)})},Q=c(E).attrs({verticalMargin:"m",horizontalMargin:"m"})((e=>({paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}))),Y=e=>{let{subtitles:t,close:n}=e;const r=S(),[o,i]=Object(s.useState)(r.running),[c,a]=Object(s.useState)(r.v),[l,d]=Object(s.useState)(!1),[h,u]=Object(s.useState)(!1),j=Object(s.useRef)(),g=Object(s.useMemo)((()=>t.filter((e=>"cue"===e.type)).map((e=>e.data))),[t]);Object(s.useEffect)((()=>{const e=new _.a;return document.addEventListener("click",(function t(){document.removeEventListener("click",t,!1),e.enable()}),!1),()=>{e.disable()}}),[]),Object(s.useEffect)((()=>{const e=g[g.length-1].end;return r.observe((t=>{i(r.running),a(r.v),r.running&&t>=e&&r.pause()}))}),[r,g]);const f=Object(s.useCallback)((()=>{if(l&&o)if(j.current){const e=(r.t-j.current[1])/(Date.now()-j.current[0]);e>0&&r.set(r.t,e)}else j.current=[Date.now(),r.t];else j.current=void 0}),[l,o,r]),v=Object(s.useCallback)((()=>{r.set(r.t,1),j.current=void 0,f()}),[f,r]);Object(s.useEffect)(f,[f]);const O=Object(s.useCallback)((()=>{const e=r.t,t=g[Math.min(g.length-1,b(g,(t=>e<t.start)))];r.set(t.start),f()}),[g,r,f]),p=Object(s.useCallback)((()=>{const e=r.t,t=g[Math.max(0,b(g,(t=>e<t.end))-1)];r.set(t.start),f()}),[g,r,f]);return Object(s.useEffect)((()=>{const e=e=>{switch(e.key){case"ArrowLeft":p();break;case"ArrowRight":O();break;case" ":r.running?r.pause():r.start()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[O,p,r]),Object(y.jsx)(q,{background:h?"black":void 0,children:Object(y.jsx)(z,{style:{flex:1},children:Object(y.jsx)(Q,{style:{flex:1},children:Object(y.jsxs)(E,{style:{flex:1,minHeight:h?"100vh":void 0},children:[h?Object(y.jsx)(G,{style:{alignSelf:"flex-end"},onClick:()=>u(!1),fontSize:"xl",children:Object(y.jsx)(V.b,{})}):Object(y.jsxs)(E,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsx)(G,{onClick:n,fontSize:"xl",children:Object(y.jsx)(H.a,{})}),Object(y.jsx)(G,{onClick:p,fontSize:"xl",children:Object(y.jsx)(H.c,{})}),Object(y.jsx)(G,{onClick:()=>r.running?r.pause():r.start(),fontSize:"xl",children:o?Object(y.jsx)(H.d,{}):Object(y.jsx)(H.e,{})}),Object(y.jsx)(G,{onClick:O,fontSize:"xl",children:Object(y.jsx)(H.b,{})}),Object(y.jsx)(G,{onClick:()=>{u(!0)},fontSize:"xl",children:Object(y.jsx)(V.a,{})})]}),Object(y.jsx)(q,{foreground:"white",children:Object(y.jsx)(E,{style:{flex:1,justifyContent:"center"},children:Object(y.jsx)(K,{cues:g})})}),!h&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(E,{verticalMargin:"m",style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(y.jsx)(C,{}),Object(y.jsxs)(E,{style:{flexDirection:"row",alignItems:"center"},children:[Object(y.jsxs)(m,{children:["Speed: ",Object(y.jsx)(X,{speed:c})]}),Object(y.jsx)(G,{title:"Once activated, the speed will automatically be adjusted to match the current subtitle.",horizontalMargin:"m",onClick:()=>d(!l),style:{textDecoration:l?void 0:"line-through"},fontSize:"s",fontWeight:l?"bold":void 0,children:"Adaptive"}),Object(y.jsx)(G,{title:"Sets the speed to 1",onClick:v,fontSize:"s",children:Object(y.jsx)(x,{children:"Reset"})})]})]}),Object(y.jsx)(N,{mode:"DARKEN_BACKGROUND",children:Object(y.jsx)(M,{cues:g})})]})]})})})})};var Z=n(53),$=n(59);const ee=e=>{const[t,n]=Object(s.useState)(),{getRootProps:r,getInputProps:o,isDragActive:i}=Object($.a)({onDrop:s=>{n(void 0);var r=new FileReader;r.onload=function(s){try{var r;e.onLoad(Object(Z.a)(null===(r=s.target)||void 0===r?void 0:r.result))}catch(t){n(String(t))}},r.readAsText(s[0])}});return Object(y.jsxs)(E,{style:{alignItems:"center"},children:[Object(y.jsxs)("div",{...r(),children:[Object(y.jsx)("input",{...o()}),Object(y.jsx)(N,{mode:i?"INVERT":"LIGHTEN_BACKGROUND",strength:5,children:Object(y.jsx)(F,{padding:"ml",children:Object(y.jsx)(m,{children:Object(y.jsx)(x,{children:"Drop or select subtitle here"})})})})]}),Object(y.jsx)(q,{foreground:"red",children:Object(y.jsx)(m,{margin:"m",children:t})})]})};var te;const ne=c("a")(te||(te=Object(W.a)(["\n  color: ",";\n  text-decoration: none;\n  transition: 0.5s;\n  :hover {\n    transition: 0.5s;\n    cursor: pointer;\n    color: ",";\n    text-decoration: none;\n  }\n  :active {\n    transition: 0s;\n    color: ",";\n  }\n"])),(e=>e.theme.colors.foreground),(e=>(e=>{const t=A()(e);return t.isDark()?t.lighten(.25).string():t.darken(.25).string()})(e.theme.colors.foreground)),(e=>(e=>{const t=A()(e);return t.isDark()?t.lighten(.5).string():t.darken(.5).string()})(e.theme.colors.foreground)));var se=n.p+"static/media/icon.6e1e5cca.svg",re=n(58),oe=n.p+"static/media/screenshot.ce0f32a9.png";const ie=e=>{let{setSubtitles:t}=e;const{elementSizes:n}=l();return Object(y.jsx)(z,{style:{flex:1,alignItems:"center"},children:Object(y.jsx)(Q,{style:{flex:1,zIndex:1,maxWidth:n.content},children:Object(y.jsxs)(E,{style:{flex:1,justifyContent:"space-around",alignItems:"center"},children:[Object(y.jsxs)(E,{margin:"l",style:{width:"100%",alignItems:"center"},children:[Object(y.jsx)("img",{width:n.logo,alt:"project logo",src:se}),Object(y.jsxs)(m,{style:{textAlign:"center"},padding:"ml",fontSize:"xl",children:[Object(y.jsx)(x,{children:"Subs"}),"titute"]}),Object(y.jsx)(m,{style:{textAlign:"center"},fontSize:"ml",children:"A subtitle player for the browser"})]}),Object(y.jsx)(E,{margin:"ml",children:Object(y.jsx)(ee,{onLoad:t})}),Object(y.jsx)(m,{margin:"m",style:{textAlign:"center"},fontSize:"m",children:"Using Substitute, you can watch subtitles from an external device, such as a smartphone or tablet. This is useful for the rare situations where you don't have control over the video source, or want to easily adjust subtitle timings without interrupting the movie."}),Object(y.jsx)(E,{horizontalMargin:"m",verticalMargin:"l",children:Object(y.jsx)("img",{src:oe,alt:"Screenshot of a mobile device using Substitute",style:{maxWidth:n.screenshot,width:"100%",objectFit:"contain"}})}),Object(y.jsxs)(E,{style:{alignItems:"center"},children:[Object(y.jsx)(m,{fontSize:"ml",children:Object(y.jsx)(x,{children:"Usage"})}),Object(y.jsx)(m,{verticalMargin:"m",children:Object(y.jsxs)("ol",{children:[Object(y.jsxs)("li",{children:["Select a subtitle file (e.g. from"," ",Object(y.jsx)(ne,{href:"https://www.opensubtitles.org",children:"OpenSubtitles.org"}),")"]}),Object(y.jsx)("li",{children:"Use the controls to synchronize the current subtitles with the movie"}),Object(y.jsx)("li",{children:"If necessary, adjust the speed by changing the value or choosing adaptive speed to synchronize with your changes"})]})})]}),Object(y.jsx)(G,{as:"a",href:"https://github.com/thelartians/substitute",children:Object(y.jsx)(re.a,{size:n.icon})})]})})})};var ce=function(){const[e,t]=Object(s.useState)(),n=Object(s.useMemo)((()=>e?new p:void 0),[e]);return Object(y.jsx)(a,{theme:h,children:e?Object(y.jsx)(w,{value:n,children:Object(y.jsx)(Y,{close:()=>t(void 0),subtitles:e})}):Object(y.jsx)(ie,{setSubtitles:t})})};const ae=document.getElementById("root"),le=Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(ce,{})});ae.hasChildNodes()?Object(o.hydrate)(le,ae):Object(o.render)(le,ae)},64:function(e,t,n){},79:function(e,t){},81:function(e,t){},91:function(e,t){},93:function(e,t){},97:function(e,t){},99:function(e,t){}},[[106,1,2]]]);
//# sourceMappingURL=main.ed95c957.chunk.js.map