(this.webpackJsonpsubstitute=this.webpackJsonpsubstitute||[]).push([[0],{58:function(e,t,n){},73:function(e,t){},75:function(e,t){},85:function(e,t){},87:function(e,t){},91:function(e,t){},93:function(e,t){},98:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(23),i=(n(58),n(45));const{default:c,ThemeProvider:a,useTheme:l}=i,d={blue:"rgb(98,135,161)",black:"black",white:"white",dark:"#111111",darkBlue:"#0a6bab",lightGray:"#CCCCCC",red:"red"},h={palette:d,colors:{foreground:d.lightGray,background:d.dark},elementSizes:{icon:44,scrubbar:30,scrubCursor:2,content:800,logo:150,screenshot:500},spacings:{xxs:1,xs:2,s:5,m:10,ml:20,l:50,xl:100,xxl:250},lineHeight:1.5,fontSizes:{xxs:10,xs:12,s:14,m:16,ml:20,l:24,xl:32,xxl:48},fontWeights:{normal:"normal",bold:"bold",lighter:"lighter"},breakpoints:{mobileM:750,mobileS:350}},u=(e,t)=>t&&"".concat(e.spacings[t],"px");function b(e,t){let n=0,r=e.length;for(;n<r;){let o=Math.floor((r+n)/2);t(e[o])?r=o:n=o+1}return n}const g=e=>Math.abs(e)<10?"0".concat(e):e.toString(),f=e=>({padding:u(e.theme,e.padding),paddingTop:u(e.theme,e.verticalPadding),paddingBottom:u(e.theme,e.verticalPadding),paddingLeft:u(e.theme,e.horizontalPadding),paddingRight:u(e.theme,e.horizontalPadding),margin:u(e.theme,e.margin),marginLeft:u(e.theme,e.horizontalMargin),marginRight:u(e.theme,e.horizontalMargin),marginTop:u(e.theme,e.verticalMargin),marginBottom:u(e.theme,e.verticalMargin)}),m=(e,t,n,r)=>"rgba(0,0,0,".concat(n,") 0px ").concat(u(r,e)," ").concat(u(r,t)),j=c("span")((e=>{var t,n;return[f(e),{fontWeight:e.theme.fontWeights[null!==(t=e.fontWeight)&&void 0!==t?t:"normal"],color:e.theme.colors.foreground,fontSize:e.theme.fontSizes[null!==(n=e.fontSize)&&void 0!==n?n:"m"],lineHeight:e.theme.lineHeight}]})),v=(c("span")((e=>({fontWeight:e.theme.fontWeights.bold}))),c("span")((e=>({fontFamily:"monospace"})))),x=(c(j)((e=>{var t,n,r;return{textShadow:m(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(r=e.shadowOpacity)&&void 0!==r?r:.5,e.theme)}})),e=>{let t,n=!0;const r=()=>{n&&(e(),t=requestAnimationFrame(r))};return t=requestAnimationFrame(r),()=>{n=!1,cancelAnimationFrame(t)}});class O{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.t0=e,this.v=t,this.t=void 0,this.running=!1,this.stopCallback=void 0,this.observers=new Set,this.t=e}broadcast(){const e=this.t;this.observers.forEach((t=>t(e)))}start(){if(!this.running){this.running=!0;const e=Date.now();this.stopCallback=x((()=>{this.t=(Date.now()-e)*this.v+this.t0,this.broadcast()}))}}pause(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this.stopCallback)||void 0===e||e.call(this),this.stopCallback=void 0,this.running=!1,this.t0=this.t,t&&this.broadcast()}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.v;this.t=e,this.v=t,this.running?(this.pause(!1),this.start()):(this.t0=e,this.broadcast())}observe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}}const p=Object(r.createContext)(new O),w=p.Provider,k=()=>Object(r.useContext)(p);var S=n(1);const y=Object(r.memo)((()=>{const e=k(),[t,n]=Object(r.useState)(e.t);return Object(r.useEffect)((()=>e.observe((e=>n(Math.floor(e/1e3))))),[e]),Object(S.jsx)(j,{fontSize:"m",children:Object(S.jsxs)(v,{children:[g(Math.floor(t/3600)),":",g(Math.floor(t/60%60)),":",g(Math.floor(t%60))]})})})),E=c("div")((e=>({...f(e),display:"flex",flexDirection:"column"}))),C=c(E)((e=>({backgroundColor:e.theme.colors.background,borderRadius:u(e.theme,e.borderRadius),overflow:"hidden"}))),M=(c(C)((e=>{var t,n,r;return{boxShadow:m(null!==(t=e.shadowOffset)&&void 0!==t?t:"xs",null!==(n=e.shadowSpread)&&void 0!==n?n:"xs",null!==(r=e.shadowOpacity)&&void 0!==r?r:.5,e.theme)}})),e=>{let{max:t}=e;const{palette:n,elementSizes:o}=l(),s=k(),[i,c]=Object(r.useState)(0);return Object(r.useEffect)((()=>s.observe((e=>c(e/t)))),[s,t]),Object(S.jsx)("div",{style:{position:"absolute",left:"".concat(100*i,"%"),top:0,height:"100%",width:o.scrubCursor,backgroundColor:n.red}})}),R=Object(r.memo)((e=>{var t,n;let{cues:o}=e;const{colors:s,elementSizes:i}=l(),c=null!==(t=null===(n=o[o.length-1])||void 0===n?void 0:n.end)&&void 0!==t?t:0,a=Object(r.useRef)(null),d=k(),h=Object(r.useCallback)((e=>{e.width=e.offsetWidth,e.height=e.offsetHeight;const t=e.getContext("2d");if(t){t.clearRect(0,0,e.width,e.height);const n=e.width/c;t.fillStyle=s.foreground;for(const r of o)t.fillRect(r.start*n,0,(r.end-r.start)*n,e.height)}}),[o,s,c]);return Object(r.useEffect)((()=>{const e=a.current;if(e){h(e);const t=t=>{if(1===t.buttons){const n=e.getBoundingClientRect(),r=(t.clientX-n.left)/e.offsetWidth;d.set(r*c)}},n=t=>{const n=e.getBoundingClientRect(),r=(t.touches[0].clientX-n.left)/e.offsetWidth;d.set(Math.min(Math.max(r,0),1)*c)},r=()=>h(e);return window.addEventListener("resize",r),e.addEventListener("mousemove",t),e.addEventListener("mousedown",t),e.addEventListener("touchmove",n),e.addEventListener("touchstart",n),()=>{window.removeEventListener("resize",r),e.removeEventListener("mousemove",t),e.removeEventListener("mousedown",t),e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",n)}}}),[h,d,c]),Object(S.jsxs)(C,{borderRadius:"m",style:{position:"relative",width:"100%",overflow:"hidden",cursor:"pointer",height:"15px"},children:[Object(S.jsx)("canvas",{height:i.scrubbar,style:{display:"block"},ref:a}),Object(S.jsx)(M,{max:c})]})}));var z=n(7),L=n.n(z);const A=function(e,t){let{foreground:n,background:r}=e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(t){case"NONE":return{background:r,foreground:n};case"INVERT":return{background:n,foreground:r};case"DARKEN_BACKGROUND":return{foreground:n,background:L()(r).darken(.25*o).desaturate(.5*o).toString()};case"LIGHTEN_BACKGROUND":return{foreground:n,background:L()(r).lighten(.4*o).saturate(.1*o).toString()};case"MAKE_TRANSPARENT":return{foreground:L()(n).alpha(.5*o).toString(),background:L()(r).alpha(.5*o).toString()}}},D=e=>{let{children:t,mode:n="INVERT",strength:o=1}=e;const s=l(),i=Object(r.useMemo)((()=>({...s,colors:A(s.colors,n,o)})),[s,n,o]);return Object(S.jsx)(a,{theme:i,children:t})};var N,T,B=n(25);const W=e=>{const t=L()(e);return t.isDark()?t.lighten(.1).string():t.darken(.1).string()},I=e=>{const t=L()(e);return t.isDark()?t.lighten(.25).string():t.darken(.25).string()},P=(c(j).attrs({as:"button"})(N||(N=Object(B.a)(["\n  transition: 0.25s;\n  border: none;\n  border-radius: ",";\n  outline-width: 0;\n  background-color: ",";\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: ",";\n  :hover {\n    cursor: pointer;\n    background-color: ",";\n  }\n  :active {\n    transition: 0s;\n    background-color: ",";\n  }\n"])),(e=>u(e.theme,"m")),(e=>e.theme.colors.background),(e=>e.disabled?.5:1),(e=>e.disabled?"none":"initial"),(e=>m("xxs","xs",.5,e.theme)),(e=>W(e.theme.colors.background)),(e=>I(e.theme.colors.background))),c(j)(T||(T=Object(B.a)(["\n  transition: 0.25s;\n  opacity: ",";\n  pointer-events: ",";\n  :hover {\n    cursor: pointer;\n    color: ",";\n  }\n  :active {\n    transition: 0s;\n    color: ",";\n  }\n"])),(e=>e.disabled?.5:1),(e=>e.disabled?"none":"initial"),(e=>W(e.theme.colors.foreground)),(e=>I(e.theme.colors.foreground))));var H=n(26);const G=e=>{let{cues:t}=e;const[n,o]=Object(r.useState)(""),s=k();return Object(r.useEffect)((()=>s.observe((e=>{const n=t[b(t,(t=>e<t.end))];o(n&&e>=n.start?n.text:"")}))),[s,t]),Object(S.jsx)(j,{style:{textAlign:"center"},fontSize:"l",children:n})};var K=n(49),F=n.n(K);const _=e=>{let{children:t,background:n,foreground:r}=e;const o=l(),s={...o,colors:{...o.colors,background:n?o.palette[n]:o.colors.background,foreground:r?o.palette[r]:o.colors.foreground}};return Object(S.jsx)(a,{theme:s,children:t})},U=c(E).attrs({verticalMargin:"m",horizontalMargin:"m"})((e=>({paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}))),X=e=>{let{subtitles:t,close:n}=e;const o=k(),[s,i]=Object(r.useState)(o.running),[c,a]=Object(r.useState)(o.v),[l,d]=Object(r.useState)(!1),[h,u]=Object(r.useState)(!1),g=Object(r.useRef)(),f=Object(r.useMemo)((()=>t.filter((e=>"cue"===e.type)).map((e=>e.data))),[t]);Object(r.useEffect)((()=>{const e=new F.a;return document.addEventListener("click",(function t(){document.removeEventListener("click",t,!1),e.enable()}),!1),()=>{e.disable()}}),[]),Object(r.useEffect)((()=>{const e=f[f.length-1].end;return o.observe((t=>{i(o.running),a(o.v),o.running&&t>=e&&o.pause()}))}),[o,f]);const m=Object(r.useCallback)((()=>{if(l&&s)if(g.current){const e=(o.t-g.current[1])/(Date.now()-g.current[0]);e>0&&o.set(o.t,e)}else g.current=[Date.now(),o.t];else g.current=void 0}),[l,s,o]);Object(r.useCallback)((()=>{o.set(o.t,1),g.current=void 0,m()}),[m,o]);Object(r.useEffect)(m,[m]);const j=Object(r.useCallback)((()=>{const e=o.t,t=f[Math.min(f.length-1,b(f,(t=>e<t.start)))];o.set(t.start),m()}),[f,o,m]),v=Object(r.useCallback)((()=>{const e=o.t,t=f[Math.max(0,b(f,(t=>e<t.end))-1)];o.set(t.start),m()}),[f,o,m]);return Object(r.useEffect)((()=>{const e=e=>{switch(e.key){case"ArrowLeft":v();break;case"ArrowRight":j();break;case" ":o.running?o.pause():o.start()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[j,v,o]),Object(S.jsx)(_,{background:h?"black":void 0,children:Object(S.jsx)(C,{style:{flex:1},children:Object(S.jsx)(U,{style:{flex:1},children:Object(S.jsxs)(E,{style:{flex:1,minHeight:h?"100vh":void 0},children:[Object(S.jsx)(_,{foreground:"white",children:Object(S.jsx)(E,{style:{flex:1,justifyContent:"center"},children:Object(S.jsx)(G,{cues:f})})}),!h&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(E,{verticalMargin:"xxs",style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(S.jsx)(E,{style:{flexDirection:"row",alignItems:"center",height:"24px"},children:Object(S.jsx)(P,{onClick:()=>o.running?o.pause():o.start(),fontSize:"m",children:s?Object(S.jsx)(H.a,{}):Object(S.jsx)(H.b,{})})}),Object(S.jsx)(y,{})]}),Object(S.jsx)(D,{mode:"DARKEN_BACKGROUND",children:Object(S.jsx)(R,{cues:f})})]})]})})})})},q=e=>{let{setSubtitles:t}=e;const{elementSizes:n}=l();return Object(S.jsx)(C,{style:{flex:1,alignItems:"center"},children:Object(S.jsx)(U,{style:{flex:1,zIndex:1,maxWidth:n.content},children:Object(S.jsx)(E,{style:{flex:1,justifyContent:"space-around",alignItems:"center"},children:Object(S.jsxs)(E,{margin:"l",style:{width:"100%",alignItems:"center"},children:[Object(S.jsx)(j,{style:{textAlign:"center"},padding:"ml",fontSize:"xl",children:"SubttileX"}),Object(S.jsx)(j,{style:{textAlign:"center"},fontSize:"ml",children:"Error to load the subtitle, please feedback the issue."})]})})})})};var J=n(50);var V=function(){const[e,t]=Object(r.useState)(),n=Object(r.useMemo)((()=>e?new O:void 0),[e]);return Object(r.useEffect)((()=>{(async()=>{try{const n=new URLSearchParams(window.location.search),r=n.get("id"),o=n.get("language");var e=window.location.origin+"/get_subtitle?id="+r+"&language="+o;const s=await(async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error("HTTP error! Status: ".concat(t.status));return await t.text()}catch(t){throw console.error("Error fetching text:",t),t}})(e);t(Object(J.a)(s))}catch(n){}})()}),[]),Object(S.jsx)(a,{theme:h,children:e?Object(S.jsx)(w,{value:n,children:Object(S.jsx)(X,{close:()=>t(void 0),subtitles:e})}):Object(S.jsx)(q,{setSubtitles:t})})};const Q=document.getElementById("root"),Y=Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(V,{})});Q.hasChildNodes()?Object(s.hydrate)(Y,Q):Object(s.render)(Y,Q)}},[[98,1,2]]]);
//# sourceMappingURL=main.434155d6.chunk.js.map